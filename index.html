<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Climate Quest Pakistan - An interactive climate strategy game with mini-games, XP, combos, and real-time decisions">
  <meta name="theme-color" content="#0a0e1a">
  <title>Climate Quest Pakistan: Build a Resilient Nation</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>

  <!-- ═══════════════════════════════════════════════════════════ -->
  <!-- Canvas for particles, confetti, weather effects            -->
  <!-- ═══════════════════════════════════════════════════════════ -->
  <canvas id="game-canvas"></canvas>

  <!-- ═══════════════════════════════════════════════════════════ -->
  <!-- HUD - Always visible during gameplay                       -->
  <!-- ═══════════════════════════════════════════════════════════ -->
  <div id="hud" class="hud hidden">
    <div class="hud-left">
      <div class="hud-level">
        <span class="hud-level-badge" id="hud-level">1</span>
        <div class="hud-xp-wrap">
          <div class="hud-xp-bar">
            <div class="hud-xp-fill" id="hud-xp-fill"></div>
          </div>
          <span class="hud-xp-text" id="hud-xp-text">0 / 150 XP</span>
        </div>
      </div>
    </div>
    <div class="hud-center">
      <div class="hud-combo hidden" id="hud-combo">
        <span class="combo-fire">&#x1F525;</span>
        <span class="combo-text" id="combo-text">x2 COMBO</span>
      </div>
    </div>
    <div class="hud-right">
      <div class="hud-resources" id="hud-resources"></div>
      <div class="hud-score">
        <span class="hud-score-icon">&#x2B50;</span>
        <span id="hud-resilience">0</span>
      </div>
    </div>
  </div>

  <!-- ═══════════════════════════════════════════════════════════ -->
  <!-- Toast Container for Achievement Notifications              -->
  <!-- ═══════════════════════════════════════════════════════════ -->
  <div id="toast-container" class="toast-container"></div>

  <!-- ═══════════════════════════════════════════════════════════ -->
  <!-- Level Up Overlay                                           -->
  <!-- ═══════════════════════════════════════════════════════════ -->
  <div id="levelup-overlay" class="levelup-overlay hidden">
    <div class="levelup-content">
      <div class="levelup-icon">&#x26A1;</div>
      <div class="levelup-title">LEVEL UP!</div>
      <div class="levelup-number" id="levelup-number">2</div>
      <div class="levelup-subtitle">Climate Planner Rank Increased</div>
    </div>
  </div>

  <!-- ═══════════════════════════════════════════════════════════ -->
  <!-- Screen Shake Wrapper                                       -->
  <!-- ═══════════════════════════════════════════════════════════ -->
  <div id="shake-wrapper">

    <!-- SCREEN: Welcome ──────────────────────────────────────── -->
    <div id="screen-welcome" class="screen active">
      <div class="welcome-bg-orbs">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
        <div class="orb orb-3"></div>
      </div>
      <div class="welcome-content">
        <div class="welcome-icon-wrap">
          <div class="welcome-icon">&#x1F30D;</div>
          <div class="welcome-ring"></div>
        </div>
        <h1 class="game-title">
          <span class="title-word">Climate</span>
          <span class="title-word">Quest</span>
          <span class="title-word accent">Pakistan</span>
        </h1>
        <p class="game-subtitle">Build a Resilient Nation</p>
        <p class="game-tagline">
          Step into the role of Pakistan's Chief Climate Planner.
          Make real-time decisions under pressure, earn XP, build combos,
          and prove you can save the nation from climate catastrophe.
        </p>
        <div class="welcome-features">
          <div class="feature-tag"><span>&#x23F1;</span> Timed Decisions</div>
          <div class="feature-tag"><span>&#x1F525;</span> Combo System</div>
          <div class="feature-tag"><span>&#x26A1;</span> XP & Levels</div>
          <div class="feature-tag"><span>&#x1F3AE;</span> Mini-Games</div>
        </div>
        <button id="btn-start" class="btn btn-primary btn-glow">
          <span>Start Your Mission</span>
          <span class="btn-arrow">&#x2192;</span>
        </button>
      </div>
    </div>

    <!-- SCREEN: Briefing ─────────────────────────────────────── -->
    <div id="screen-briefing" class="screen">
      <div class="briefing-card glass-card">
        <div class="briefing-icon">&#x1F4CB;</div>
        <h2>Mission Briefing</h2>
        <p class="briefing-story">
          You've been appointed as Pakistan's Chief Climate Planner.
          Six critical climate zones need your leadership.
          Every decision is timed. Every choice matters. Build combos for bonus XP.
        </p>

        <div class="form-group">
          <label for="player-name">Commander Name</label>
          <input type="text" id="player-name" placeholder="Enter your name..." maxlength="30" autocomplete="off">
        </div>

        <div class="form-group">
          <label>Select Difficulty</label>
          <div class="difficulty-selector">
            <button class="diff-btn" data-diff="explorer">
              <div class="diff-icon">&#x1F331;</div>
              <strong>Explorer</strong>
              <span>More resources, gentler outcomes</span>
            </button>
            <button class="diff-btn selected" data-diff="planner">
              <div class="diff-icon">&#x1F3AF;</div>
              <strong>Planner</strong>
              <span>Balanced challenge</span>
            </button>
            <button class="diff-btn" data-diff="expert">
              <div class="diff-icon">&#x1F525;</div>
              <strong>Expert</strong>
              <span>Scarce resources, harsh outcomes</span>
            </button>
          </div>
        </div>

        <button id="btn-begin" class="btn btn-success btn-glow" style="width:100%;justify-content:center;">
          <span>Launch Mission</span>
          <span>&#x1F680;</span>
        </button>
      </div>
    </div>

    <!-- SCREEN: Dashboard ────────────────────────────────────── -->
    <div id="screen-dashboard" class="screen">
      <div class="dashboard-header container">
        <div class="dashboard-info">
          <h2>&#x1F5FA;&#xFE0F; Mission Control: <span id="dashboard-name"></span></h2>
          <div class="dashboard-progress">
            <div class="progress-bar">
              <div class="progress-fill" id="zone-progress-fill"></div>
            </div>
            <span id="zones-done">0</span> / 6 zones completed
          </div>
        </div>
        <div class="dashboard-stats">
          <div class="stat-pill">
            <span class="stat-icon">&#x2B50;</span>
            <span>Resilience: <strong id="dashboard-resilience">0</strong></span>
          </div>
          <div class="stat-pill">
            <span class="stat-icon">&#x26A1;</span>
            <span>Level: <strong id="dashboard-level">1</strong></span>
          </div>
        </div>
      </div>

      <div class="resources-panel container glass-card">
        <h3>&#x1F4CA; National Resources</h3>
        <div id="resources-dashboard"></div>
      </div>

      <h3 class="zone-section-title container">&#x26A0;&#xFE0F; Climate Zones &mdash; Choose Your Next Challenge</h3>
      <div id="zone-grid" class="zone-grid container"></div>
    </div>

    <!-- SCREEN: Scenario ─────────────────────────────────────── -->
    <div id="screen-scenario" class="screen">
      <div class="scenario-header">
        <div class="scenario-zone-badge glass-pill">
          <span id="scenario-zone-icon"></span>
          <span id="scenario-zone-name"></span>
          <span class="badge-divider"></span>
          <span id="scenario-zone-challenge"></span>
        </div>
        <h2 class="scenario-title" id="scenario-title"></h2>
      </div>

      <div class="scenario-card glass-card">
        <p class="scenario-narrative" id="scenario-narrative"></p>
      </div>

      <div class="scenario-resources-panel glass-card">
        <h4>&#x1F4CA; Current Resources</h4>
        <div id="scenario-resources"></div>
      </div>

      <button id="btn-face-challenge" class="btn btn-warning btn-glow btn-pulse">
        <span>Face the Challenge</span>
        <span>&#x26A1;</span>
      </button>
    </div>

    <!-- SCREEN: Decision (with Timer) ────────────────────────── -->
    <div id="screen-decision" class="screen">
      <div class="decision-top container">
        <div class="decision-header">
          <h2 id="decision-title"></h2>
          <p>Choose wisely — the clock is ticking!</p>
        </div>
        <div class="decision-timer">
          <svg class="timer-ring" viewBox="0 0 120 120">
            <circle class="timer-track" cx="60" cy="60" r="54" />
            <circle class="timer-fill" cx="60" cy="60" r="54" id="timer-circle" />
            <text x="60" y="68" class="timer-text" id="timer-text">30</text>
          </svg>
          <div class="timer-label">seconds</div>
        </div>
      </div>

      <div class="decision-resources-panel container glass-card">
        <h4>&#x1F4CA; Resources at Stake</h4>
        <div id="decision-resources"></div>
      </div>

      <div id="choice-cards" class="choice-cards container"></div>
    </div>

    <!-- SCREEN: Outcome ──────────────────────────────────────── -->
    <div id="screen-outcome" class="screen">
      <div class="outcome-card glass-card">
        <div id="outcome-quality" class="outcome-quality"></div>
        <h3 id="outcome-choice-name" class="outcome-choice-name"></h3>
        <p id="outcome-text" class="outcome-text"></p>

        <div class="outcome-xp-display">
          <div class="xp-earned" id="outcome-xp">+100 XP</div>
          <div class="xp-breakdown" id="outcome-xp-breakdown"></div>
        </div>

        <div class="outcome-resilience-badge">
          <span class="label">Resilience Gained:</span>
          <span class="value" id="outcome-resilience"></span>
        </div>

        <div class="outcome-section">
          <h4>&#x1F4D6; Climate Fact</h4>
          <p id="outcome-fact"></p>
        </div>

        <div class="outcome-section">
          <h4>&#x1F914; Reflect &amp; Discuss</h4>
          <p id="outcome-reflection"></p>
        </div>

        <div class="outcome-total">
          Total National Resilience: <span id="outcome-total-resilience">0</span>
        </div>
      </div>

      <div class="outcome-resources-wrap glass-card">
        <h4>&#x1F4CA; Updated Resources</h4>
        <div id="outcome-resources"></div>
      </div>

      <div class="outcome-actions">
        <button id="btn-continue" class="btn btn-primary btn-glow">
          <span>Continue</span>
          <span>&#x2192;</span>
        </button>
      </div>
    </div>

    <!-- SCREEN: Mini-Game ────────────────────────────────────── -->
    <div id="screen-minigame" class="screen">
      <div class="minigame-container glass-card">
        <div class="minigame-header">
          <h2>&#x1F3AE; Climate Quiz Blitz!</h2>
          <p>Answer fast for bonus XP! True or False?</p>
        </div>
        <div class="minigame-progress">
          <div class="minigame-progress-bar">
            <div class="minigame-progress-fill" id="minigame-progress-fill"></div>
          </div>
          <span id="minigame-count">1 / 5</span>
        </div>
        <div class="minigame-timer-bar">
          <div class="minigame-timer-fill" id="minigame-timer-fill"></div>
        </div>
        <div class="minigame-question" id="minigame-question"></div>
        <div class="minigame-buttons">
          <button class="btn-quiz btn-true" id="btn-true">
            <span class="quiz-icon">&#x2705;</span> TRUE
          </button>
          <button class="btn-quiz btn-false" id="btn-false">
            <span class="quiz-icon">&#x274C;</span> FALSE
          </button>
        </div>
        <div class="minigame-feedback hidden" id="minigame-feedback">
          <div class="feedback-icon" id="feedback-icon"></div>
          <div class="feedback-text" id="feedback-text"></div>
          <div class="feedback-fact" id="feedback-fact"></div>
        </div>
        <div class="minigame-score">
          Score: <span id="minigame-score">0</span>
        </div>
      </div>
    </div>

    <!-- SCREEN: Random Event ─────────────────────────────────── -->
    <div id="screen-event" class="screen">
      <div class="event-card glass-card">
        <div id="event-icon" class="event-icon"></div>
        <div id="event-type" class="event-type"></div>
        <h2 id="event-title" class="event-title"></h2>
        <p id="event-description" class="event-description"></p>
        <div id="event-effects" class="event-effects"></div>
        <button id="btn-event-continue" class="btn btn-primary btn-glow">
          <span>Continue</span>
          <span>&#x2192;</span>
        </button>
      </div>
    </div>

    <!-- SCREEN: Final Score ──────────────────────────────────── -->
    <div id="screen-final" class="screen">
      <div class="final-header container">
        <h2>Mission Complete</h2>
        <p><span id="final-name"></span>'s National Climate Report</p>
      </div>

      <div class="score-circle-wrap">
        <div class="score-circle">
          <svg class="score-ring" viewBox="0 0 200 200">
            <circle class="score-ring-track" cx="100" cy="100" r="90" />
            <circle class="score-ring-fill" cx="100" cy="100" r="90" id="score-ring-fill" />
          </svg>
          <div class="score-inner">
            <div class="score-number" id="final-score">0</div>
            <div class="score-label">/ 100</div>
          </div>
        </div>
      </div>

      <div class="final-grade-display">
        <div class="final-grade-letter" id="final-grade"></div>
        <div class="final-grade-title" id="final-title"></div>
        <p class="final-grade-message" id="final-message"></p>
      </div>

      <div class="final-stats-row container">
        <div class="final-stat glass-card">
          <div class="final-stat-value" id="final-level">1</div>
          <div class="final-stat-label">Level</div>
        </div>
        <div class="final-stat glass-card">
          <div class="final-stat-value" id="final-xp">0</div>
          <div class="final-stat-label">Total XP</div>
        </div>
        <div class="final-stat glass-card">
          <div class="final-stat-value" id="final-max-combo">0</div>
          <div class="final-stat-label">Max Combo</div>
        </div>
      </div>

      <div class="final-card glass-card container">
        <h3>&#x1F4CA; Score Breakdown</h3>
        <div class="final-breakdown">
          <span class="label">Resilience Points</span>
          <span class="value" id="final-resilience"></span>
          <span class="label">Resource Bonus</span>
          <span class="value" id="final-resource-bonus"></span>
        </div>
      </div>

      <div class="final-card glass-card container">
        <h3>&#x1F4B0; Final Resources</h3>
        <div id="final-resources"></div>
      </div>

      <div class="final-card glass-card container">
        <h3>&#x1F3C6; Achievements Unlocked</h3>
        <div id="final-achievements"></div>
      </div>

      <div class="final-card glass-card container">
        <h3>&#x1F5C2;&#xFE0F; Decision History</h3>
        <div id="final-history"></div>
      </div>

      <div class="final-actions container">
        <button id="btn-replay" class="btn btn-success btn-glow">
          <span>Play Again</span>
          <span>&#x1F504;</span>
        </button>
      </div>
    </div>

  </div><!-- /shake-wrapper -->

  <!-- Scripts -->
  <script src="js/data.js"></script>
  <script src="js/game.js"></script>

</body>
</html>
